import{a as v,c as re,b as ae,l as G,u as F,r as H,o as r,d as a,e as i,w as q,n as k,t as p,f as h,g as $,v as R,h as K,F as L,i as S,j as Y,p as J,k as Z,m as j,q as g,s as B,x as le,y,z as ce,A as U,B as de,C as ue,D as _e,E as he,G as me,H as pe,I as fe,J as ve,V as ge}from"./vendor.js";const Ve=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}};Ve();const N="Lyanna-Token",we=1/24;function P(){return v.get(N)}function ke(e){return v.set(N,e,{expires:we})}function Ee(){return v.remove(N)}const be={state:{sidebar:{opened:v.get("sidebarStatus")?!!+v.get("sidebarStatus"):!0,withoutAnimation:!1},device:"desktop",language:v.get("language")||"en",size:v.get("size")||"medium"},mutations:{TOGGLE_SIDEBAR:e=>{e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1,e.sidebar.opened?v.set("sidebarStatus",1):v.set("sidebarStatus",0)},CLOSE_SIDEBAR:(e,t)=>{v.set("sidebarStatus",0),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:(e,t)=>{e.device=t},SET_LANGUAGE:(e,t)=>{e.language=t,v.set("language",t)},SET_SIZE:(e,t)=>{e.size=t,v.set("size",t)}},actions:{toggleSideBar({commit:e}){e("TOGGLE_SIDEBAR")},closeSideBar({commit:e},{withoutAnimation:t}){e("CLOSE_SIDEBAR",t)},toggleDevice({commit:e},t){e("TOGGLE_DEVICE",t)},setLanguage({commit:e},t){e("SET_LANGUAGE",t)},setSize({commit:e},t){e("SET_SIZE",t)}}},Ie={state:{user:"",status:"",code:"",token:P(),name:"",avatar:""},mutations:{SET_CODE:(e,t)=>{e.code=t},SET_TOKEN:(e,t)=>{e.token=t},SET_STATUS:(e,t)=>{e.status=t},SET_NAME:(e,t)=>{e.name=t},SET_AVATAR:(e,t)=>{e.avatar=t}},actions:{LoginByUsername({commit:e},t){const s=t.username.trim();return new Promise((n,o)=>{Se(s,t.password).then(l=>{const f=l.data;e("SET_TOKEN",f.access_token),ke(l.data.access_token),n()}).catch(l=>{o(l)})})},GetUserInfo({commit:e,state:t}){return new Promise((s,n)=>{Ae(t.token).then(o=>{o.data||n("Verification failed, please login again.");const l=o.data;e("SET_NAME",l.name),e("SET_AVATAR",l.avatar),s(o)}).catch(o=>{n(o)})})},SetNewAvatar({commit:e,state:t},s){t.name==s[0]&&e("SET_AVATAR",s[1])},FedLogOut({commit:e}){return new Promise(t=>{e("SET_TOKEN",""),Ee(),t()})}}},ye={token:e=>e.user.token,avatar:e=>e.user.avatar,name:e=>e.user.name,sidebar:e=>e.app.sidebar,device:e=>e.app.device,visitedViews:e=>e.tagsView.visitedViews,cachedViews:e=>e.tagsView.cachedViews,size:e=>e.app.size},Le={state:{visitedViews:[],cachedViews:[]},mutations:{ADD_VISITED_VIEW:(e,t)=>{e.visitedViews.some(s=>s.path===t.path)||e.visitedViews.push(Object.assign({},t,{title:t.meta.title||"no-name"}))},ADD_CACHED_VIEW:(e,t)=>{e.cachedViews.includes(t.name)||t.meta.noCache||e.cachedViews.push(t.name)},DEL_VISITED_VIEW:(e,t)=>{for(const[s,n]of e.visitedViews.entries())if(n.path===t.path){e.visitedViews.splice(s,1);break}},DEL_CACHED_VIEW:(e,t)=>{for(const s of e.cachedViews)if(s===t.name){const n=e.cachedViews.indexOf(s);e.cachedViews.splice(n,1);break}},DEL_OTHERS_VISITED_VIEWS:(e,t)=>{e.visitedViews=e.visitedViews.filter(s=>s.meta.affix||s.path===t.path)},DEL_OTHERS_CACHED_VIEWS:(e,t)=>{for(const s of e.cachedViews)if(s===t.name){const n=e.cachedViews.indexOf(s);e.cachedViews=e.cachedViews.slice(n,n+1);break}},DEL_ALL_VISITED_VIEWS:e=>{const t=e.visitedViews.filter(s=>s.meta.affix);e.visitedViews=t},DEL_ALL_CACHED_VIEWS:e=>{e.cachedViews=[]},UPDATE_VISITED_VIEW:(e,t)=>{for(let s of e.visitedViews)if(s.path===t.path){s=Object.assign(s,t);break}}},actions:{addView({dispatch:e},t){e("addVisitedView",t),e("addCachedView",t)},addVisitedView({commit:e},t){e("ADD_VISITED_VIEW",t)},addCachedView({commit:e},t){e("ADD_CACHED_VIEW",t)},delView({dispatch:e,state:t},s){return new Promise(n=>{e("delVisitedView",s),e("delCachedView",s),n({visitedViews:[...t.visitedViews],cachedViews:[...t.cachedViews]})})},delVisitedView({commit:e,state:t},s){return new Promise(n=>{e("DEL_VISITED_VIEW",s),n([...t.visitedViews])})},delCachedView({commit:e,state:t},s){return new Promise(n=>{e("DEL_CACHED_VIEW",s),n([...t.cachedViews])})},delOthersViews({dispatch:e,state:t},s){return new Promise(n=>{e("delOthersVisitedViews",s),e("delOthersCachedViews",s),n({visitedViews:[...t.visitedViews],cachedViews:[...t.cachedViews]})})},delOthersVisitedViews({commit:e,state:t},s){return new Promise(n=>{e("DEL_OTHERS_VISITED_VIEWS",s),n([...t.visitedViews])})},delOthersCachedViews({commit:e,state:t},s){return new Promise(n=>{e("DEL_OTHERS_CACHED_VIEWS",s),n([...t.cachedViews])})},delAllViews({dispatch:e,state:t},s){return new Promise(n=>{e("delAllVisitedViews",s),e("delAllCachedViews",s),n({visitedViews:[...t.visitedViews],cachedViews:[...t.cachedViews]})})},delAllVisitedViews({commit:e,state:t}){return new Promise(s=>{e("DEL_ALL_VISITED_VIEWS"),s([...t.visitedViews])})},delAllCachedViews({commit:e,state:t}){return new Promise(s=>{e("DEL_ALL_CACHED_VIEWS"),s([...t.cachedViews])})},updateVisitedView({commit:e},t){e("UPDATE_VISITED_VIEW",t)}}},Q=re({modules:{app:be,user:Ie,tagsView:Le},getters:ye}),V=ae.create({baseURL:"/",timeout:5e3});V.interceptors.request.use(e=>(Q.getters.token&&(e.headers.authorization=`Bearer ${P()}`),e),e=>{console.log(e),Promise.reject(e)});V.interceptors.response.use(e=>e,e=>(console.log("err"+e),Promise.reject(e)));const Se=(e,t)=>V({url:"/auth",method:"post",data:{username:e,password:t}}),Ae=e=>V({url:"/api/user/info",method:"get",params:{token:e}}),Ce=e=>V({url:"/api/status",method:"post",data:e}),Te=e=>V({url:"/api/get_url_info",method:"post",data:{url:e}}),De=e=>V({url:"/j/activities",method:"get",params:{page:e}}),xe=(e,t,s=2)=>{const n={reaction_type:s};return V({url:`/j/activity/${e}/react`,headers:{"content-type":"application/x-www-form-urlencoded"},method:t,data:G.stringify(n)})},Oe=(e,t,s=0)=>{const n={content:t,ref_id:s};return V({url:`/j/activity/${e}/comment`,headers:{"content-type":"application/x-www-form-urlencoded"},method:"post",data:G.stringify(n)})},$e=e=>V({url:`/j/activity/${e}/comments`,method:"get"});var D=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s};const A=F(),Re={data(){return{text:"",url:"",urlInfo:null,urlLoading:!1,urlError:"",activeLi:1,files:[],fids:new Map,OnFocus:!1,name:"file"}},methods:{getLinkInfo(){if(!this.url.startsWith("http"))return this.urlError="\u8FD9\u4E0D\u662F\u4E00\u4E2A\u7F51\u5740",!1;this.urlLoading=!0,Te(this.url).then(e=>{e.data.r==1?this.urlError=e.data.msg:this.urlInfo=e.data.info,this.urlLoading=!1}).catch(()=>{this.urlError="\u8D85\u65F6\u4E86\uFF0C\u8BF7\u91CD\u8BD5",this.urlLoading=!1})},async customAction(e,t){let s=await t.uploadHtml5(e);const n=JSON.parse(s.xhr.responseText).filename;return this.fids.set(e.id,n),console.log(e,n),s},reset(){this.files=[],this.fids=new Map,this.url="",this.urlInfo=null},activate(e){this.activeLi=e,this.activeLi==1&&e!=1||this.reset()},onSubmit(){const e=[...this.fids.values()],t={text:this.text,url:this.url,fids:e};this.url&&(t.url_info=this.urlInfo),Ce(t).then(s=>{s.data.r==1?A.error(`\u53D1\u5E03\u5931\u8D25: ${s.data.msg}`):(this.text="",this.url="",A.success("\u5DF2\u53D1\u5E03"),this.$emit("insertNewActivity",s.data.activity),this.reset())}).catch(()=>{A.error("\u53D1\u5E03\u5931\u8D25")})},getCover(e){return e.id in this.fids&&"/static/upload/"+this.fids.get(e.id).replace(".mp4",".png")||""},removeFile(e){this.$refs.upload.remove(e),this.fids.delete(e.id)},inputFilter(e,t,s){if(e&&!t){if(!/\.(jepg?|png?|mp4?|gif?|jpg?)$/i.test(e.name))return A.error("\u4E0D\u652F\u6301\u7684\u6587\u4EF6\u7C7B\u578B"),s();let n=e.type.substr(0,6);if(this.activeLi==2&&n!="image/")return A.error("\u7167\u7247Tab\u4E0B\u4E0D\u80FD\u653E\u89C6\u9891"),s();if(this.activeLi==3&&n!="video/")return A.error("\u89C6\u9891Tab\u4E0B\u4E0D\u80FD\u653E\u7167\u7247"),s()}if(e&&(e.active=!0),e&&(!t||e.file!==t.file)){e.blob="";let n=window.URL||window.webkitURL;n&&n.createObjectURL&&(e.blob=n.createObjectURL(e.file)),e.thumb="",e.blob&&e.type.substr(0,6)==="image/"&&(e.thumb=e.blob)}},inputFile(e,t){if(e&&!t&&this.files.length==1){let s=e.type.substr(0,6);s==="image/"?this.activeLi=2:s==="video/"&&(this.activeLi=3)}}},computed:{textAreaHeight(){if(this.OnFocus||this.activeLi!=1){let e=this.text.split(/\r\n|\r|\n/).length+1;return e>5?e*16:80}else return 32},showIcon(){return this.activeLi==1}}},w=e=>(J("data-v-5b5cc41d"),e=e(),Z(),e),je={id:"form"},Ue={class:"activity-tab"},He=w(()=>i("a",{href:"javascript:void(0);"},[i("i",{class:"iconfont icon-dongtai icon-right"}),i("span",null,"\u53D1\u52A8\u6001")],-1)),Ne=[He],Pe=w(()=>i("a",{href:"javascript:void(0);"},[i("i",{class:"iconfont icon-photo icon-right"}),i("span",null,"\u53D1\u7167\u7247")],-1)),We=[Pe],ze=w(()=>i("a",{href:"javascript:void(0);"},[i("i",{class:"iconfont icon-video icon-right"}),i("span",null,"\u53D1\u89C6\u9891")],-1)),Me=[ze],Be=w(()=>i("a",{href:"javascript:void(0);"},[i("i",{class:"iconfont icon-link icon-right"}),i("span",null,"\u63A8\u8350\u7F51\u9875")],-1)),Ge=[Be],Fe={key:0,class:"field link-act"},qe={key:0,class:"hd"},Ke={class:"bd"},Ye={key:0,class:"error"},Je=["disabled"],Ze={key:3},Qe={key:4},Xe={class:"activity-content"},et={key:0,id:"label",for:"text"},tt={key:1,class:"upload-form"},st={class:"bd"},it={class:"file-list"},ot=["src"],nt=["title"],rt=["src"],at=w(()=>i("i",{class:"iconfont icon-ziyuan player-btn"},null,-1)),lt=["onClick"],ct={class:"file-item add-photo"},dt=w(()=>i("i",null,"+",-1)),ut={key:2,class:"btn"},_t=w(()=>i("button",{type:"submit",class:"pure-button activity-btn"},"\u53D1\u5E03",-1)),ht=[_t],mt={key:0,class:"pure-button-group btn-group"},pt={key:0,href:"javascript:void(0);",class:"iconfont icon-photo1",title:"\u4E0A\u4F20\u7167\u7247"},ft=w(()=>i("span",{class:"ico"},"\u7167\u7247",-1)),vt=[ft],gt={key:1,href:"javascript:void(0);",class:"iconfont icon-video1",title:"\u4E0A\u4F20\u89C6\u9891"},Vt=w(()=>i("span",{class:"ico"},"\u89C6\u9891",-1)),wt=[Vt];function kt(e,t,s,n,o,l){const f=H("file-upload");return r(),a("div",je,[i("div",{class:k(["create-activity",{active:o.OnFocus}])},[i("form",{class:"create-form",name:"form",onSubmit:t[11]||(t[11]=q((...u)=>l.onSubmit&&l.onSubmit(...u),["prevent"]))},[i("ul",Ue,[i("li",{class:k(["status",{active:o.activeLi==1}]),onClick:t[0]||(t[0]=u=>l.activate(1))},Ne,2),i("li",{class:k(["pic",{active:o.activeLi==2}]),onClick:t[1]||(t[1]=u=>l.activate(2))},We,2),i("li",{class:k(["video",{active:o.activeLi==3}]),onClick:t[2]||(t[2]=u=>l.activate(3))},Me,2),i("li",{class:k(["link",{active:o.activeLi==4}]),onClick:t[3]||(t[3]=u=>l.activate(4))},Ge,2)]),o.activeLi==4?(r(),a("div",Fe,[o.urlInfo?(r(),a("div",qe,[i("p",null,p(this.urlInfo.title),1)])):h("",!0),i("div",Ke,[o.urlError?(r(),a("div",Ye,[i("span",null,p(this.urlError),1),i("a",{href:"javascript:void(0);",onClick:t[4]||(t[4]=u=>o.urlError="")},"\u91CD\u65B0\u8F93\u5165")])):h("",!0),!o.urlError&&!o.urlLoading&&!o.urlInfo?$((r(),a("input",{key:1,type:"text",class:"link-text",name:"url","onUpdate:modelValue":t[5]||(t[5]=u=>o.url=u)},null,512)),[[R,o.url]]):h("",!0),!o.urlError&&!o.urlLoading&&!o.urlInfo?(r(),a("input",{key:2,type:"button",class:"input-link",value:"\u8F93\u5165\u7F51\u5740",onClick:t[6]||(t[6]=(...u)=>l.getLinkInfo&&l.getLinkInfo(...u)),disabled:!o.url},null,8,Je)):h("",!0),o.urlLoading?(r(),a("p",Ze,"\u6B63\u5728\u83B7\u53D6\u7F51\u5740\u4FE1\u606F...")):h("",!0),o.urlInfo?(r(),a("p",Qe,p(this.urlInfo.abstract),1)):h("",!0)]),o.urlInfo?(r(),a("a",{key:1,href:"javascript:void(0);",class:"link-cancel",onClick:t[7]||(t[7]=u=>o.urlInfo=null)},"\xD7")):h("",!0)])):h("",!0),i("div",Xe,[!o.OnFocus&&!o.text?(r(),a("label",et,"\u5206\u4EAB\u6211\u7684\u52A8\u6001...")):h("",!0),$(i("textarea",{id:"text",name:"text",style:K({height:l.textAreaHeight+"px"}),"onUpdate:modelValue":t[8]||(t[8]=u=>o.text=u),rows:"1",onFocus:t[9]||(t[9]=u=>o.OnFocus=!0)},null,36),[[R,o.text]])]),[2,3].includes(o.activeLi)?(r(),a("div",tt,[i("div",st,[i("ul",it,[(r(!0),a(L,null,S(o.files,u=>(r(),a("li",{key:u.id,class:"file-item"},[u.thumb?(r(),a("img",{key:0,src:u.thumb,class:"thumb"},null,8,ot)):(r(),a("a",{key:1,title:u.name},[i("img",{src:l.getCover(u),class:"thumb"},null,8,rt),at],8,nt)),i("a",{href:"#",class:"lnk-remove-photo",onClick:T=>l.removeFile(u)},"\xD7",8,lt)]))),128)),i("li",ct,[dt,[2,3].includes(o.activeLi)?(r(),Y(f,{key:0,class:"file-upload","custom-action":l.customAction,"post-action":"/api/upload",multiple:!0,size:1024*1024*50,drop:!0,"drop-directory":!0,modelValue:o.files,"onUpdate:modelValue":t[10]||(t[10]=u=>o.files=u),onInputFile:l.inputFile,onInputFilter:l.inputFilter,ref:"upload"},null,8,["custom-action","modelValue","onInputFile","onInputFilter"])):h("",!0)])])])])):h("",!0),o.OnFocus||o.activeLi!=1?(r(),a("div",ut,ht)):h("",!0)],32),o.activeLi==1?(r(),a("div",mt,[l.showIcon?(r(),a("a",pt,vt)):h("",!0),l.showIcon?(r(),a("a",gt,wt)):h("",!0)])):h("",!0)],2)])}var Et=D(Re,[["render",kt],["__scopeId","data-v-5b5cc41d"]]);const bt={class:"paginator"},It={class:"prev"},yt=["href"],Lt={key:1},St=["href"],At={key:1,class:"current"},Ct={key:0,class:"break"},Tt={class:"next"},Dt=["href"],xt={key:1},Ot={props:{page:Number,total:Number},setup(e){const t=j(()=>{}),s=j(()=>{});return(n,o)=>(r(),a("div",bt,[i("span",It,[e.page!=1?(r(),a("a",{key:0,href:"?p="+(e.page-1)},"<\u524D\u9875",8,yt)):(r(),a("span",Lt,"<\u524D\u9875"))]),(r(!0),a(L,null,S(g(s),(l,f)=>(r(),a("div",{key:f,class:"paginator-item"},[e.page!=l?(r(),a("a",{key:0,href:"?p="+l},p(l),9,St)):(r(),a("span",At,p(l),1))]))),128)),g(t)>5?(r(),a("span",Ct,"...")):h("",!0),i("span",Tt,[e.page!=g(t)?(r(),a("a",{key:0,href:"?p="+(e.page+1)},"\u540E\u9875>",8,Dt)):(r(),a("span",xt,"\u540E\u9875>"))])]))}};var $t=D(Ot,[["__scopeId","data-v-e1495242"]]);const x=e=>(J("data-v-66a76186"),e=e(),Z(),e),Rt={key:1,id:"activities"},jt={class:"mod"},Ut={class:"hd"},Ht={class:"avatar"},Nt=["title"],Pt=["src","alt"],Wt={class:"text"},zt={href:"javascript:void(0);",class:"bold"},Mt={class:"content"},Bt=["innerHTML"],Gt={class:"bd"},Ft={key:0,class:"lnk"},qt={class:"title"},Kt=["href"],Yt=["onClick"],Jt=["src"],Zt={key:2,class:"videos"},Qt=["onClick"],Xt=["poster"],es=["src"],ts=x(()=>i("i",{class:"iconfont icon-ziyuan video-overlay"},null,-1)),ss={class:"actions"},is=["title"],os=["href"],ns=["onClick"],rs=["onClick"],as={key:3,class:"comments"},ls={class:"comments-items"},cs=["onMouseover","onMouseleave"],ds={class:"comment-item-content"},us=x(()=>i("i",{class:"comment-item-spliter"},"-",-1)),_s=["href"],hs={key:0,class:"comment-item-action"},ms=["onClick"],ps=["onSubmit"],fs={class:"comment-text"},vs={class:"reply-target"},gs=x(()=>i("button",{class:"comment-btn",type:"submit"},"\u53D1\u8868\u56DE\u5E94",-1)),Vs=x(()=>i("div",{id:"aside"},null,-1)),ws={setup(e){B.locale("zh-cn");const t=F(),s=le();var n=y(1),o=y(10),l=y(!1),f=y([]),u=y(0),T=y(""),E=y("");const W=c=>(c.big=!1,c.showReply=!1,c.showComments=!1,c.commentFetched=!1,c.comments=[],c),X=j(()=>P()),ee=c=>{f.value.unshift(W(c))},z=c=>B(c*1e3);ce(()=>{l.value=!0,n=s.query.p||n.value,De(n).then(c=>{f.value=c.data.items.map(m=>W(m)),o.value=c.data.total,l.value=!1})});const M=c=>{c.layout==2&&c.big||(c.big=!c.big)},te=c=>{$e(c.id).then(m=>{c.comments=m.data.items.map(b=>(b.showReply=!1,b)),c.commentFetched=!0})},se=c=>{c.showComments=!c.showComments,!(c.showComments&&c.commentFetched)&&c.showComments&&te(c)},ie=c=>{xe(c.id,c.liked?"delete":"post").then(m=>{m.data.r!=0?(t.error(`\u70B9\u8D5E\u5931\u8D25: ${m.data.msg}`),m.data.r==403&&(t("\u767B\u5F55\u4E2D..."),window.location="/oauth/activities")):(c.n_likes=m.data.n_reacted,c.liked=!c.liked)})},oe=c=>{!E.value||Oe(c.id,`${T} ${E}`,u).then(m=>{if(m.data.r!=0)t.error(`\u8BC4\u8BBA\u5931\u8D25: ${m.data.msg}`),m.data.r==403&&(t("\u767B\u5F55\u4E2D..."),window.location="/oauth/activities");else{t.success("\u8BC4\u8BBA\u6210\u529F"),T="",E.value="";let b=m.data.comment;b.showReply=!1,c.comments.unshift(b)}})},ne=(c,m)=>{u=m.id,T=`\u56DE\u5E94 @${m.user.username}`};return(c,m)=>{const b=H("vue-plyr");return r(),a("div",null,[g(X)?(r(),Y(Et,{key:0,onInsertNewActivity:ee})):h("",!0),g(f).length?(r(),a("div",Rt,[(r(!0),a(L,null,S(g(f),d=>(r(),a("div",{key:d.id,class:"activity-item"},[i("div",jt,[i("div",Ut,[i("div",Ht,[i("a",{href:"javascript:void(0);",title:d.user.name},[d.user.avatar?(r(),a("img",{key:0,src:d.user.avatar,alt:d.user.name},null,8,Pt)):h("",!0)],8,Nt)]),i("div",Wt,[i("a",zt,p(d.user.name),1),de(p(d.action)+": ",1),i("div",Mt,[i("div",{class:"html",innerHTML:d.target.html_content},null,8,Bt)])])]),i("div",Gt,[d.attachments.length&&d.layout==0?(r(),a("div",Ft,[(r(!0),a(L,null,S(d.attachments,(_,I)=>(r(),a("div",{key:I,class:"blockquote"},[i("div",qt,[i("a",{href:_.url,target:"_blank"},p(_.title),9,Kt)]),i("p",null,p(_.abstract),1)]))),128))])):d.attachments.length&&d.layout==1?(r(),a("div",{key:1,class:k(["pics",{"pics-big":d.big}]),onClick:_=>M(d)},[(r(!0),a(L,null,S(d.attachments,(_,I)=>(r(),a("div",{key:I,class:"pic"},[i("img",{src:_.url},null,8,Jt)]))),128))],10,Yt)):d.attachments.length&&d.layout==2?(r(),a("div",Zt,[(r(!0),a(L,null,S(d.attachments,(_,I)=>(r(),a("div",{key:I,class:k(["video",{"video-big":d.big}]),style:K({width:_.size[0]*172*(d.big?2:1)/_.size[1]+"px"}),onClick:O=>M(d)},[U(b,{class:"screen"},{default:ue(()=>[i("video",{poster:_.cover_url},[i("source",{src:_.url,type:"video/mp4"},null,8,es)],8,Xt),ts]),_:2},1024)],14,Qt))),128))])):h("",!0),i("div",ss,[i("span",{class:"time",title:z(d.created_at).format("YYYY-MM-D HH:mm:ss")},[i("a",{href:d.target.url||"javascript:void(0);"},p(z(d.created_at).fromNow()),9,os)],8,is),d.can_comment?(r(),a("a",{key:0,href:"javascript:void(0);",class:"btn reply",onClick:_=>se(d)},p(d.showComments?" \u9690\u85CF":d.n_comments||"")+"\u8BC4\u8BBA",9,ns)):h("",!0),i("a",{href:"javascript:void(0);",class:k(["btn heart",{liked:d.liked}]),onClick:_=>ie(d)},p(d.liked?"\u5DF2":"")+"\u8D5E"+p(d.n_likes==0?"":`(${d.n_likes})`),11,rs)]),d.showComments?(r(),a("div",as,[i("div",ls,[(r(!0),a(L,null,S(d.comments,(_,I)=>(r(),a("div",{key:I,class:"comment-item",onMouseover:O=>_.showReply=!0,onMouseleave:O=>_.showReply=!1},[i("span",ds,p(_.content),1),us,i("a",{class:"comment-item-author",href:_.user.link},p(_.user.username),9,_s),_.showReply?(r(),a("div",hs,[i("a",{class:"reply",onClick:O=>ne(d,_)},"\u56DE\u590D",8,ms)])):h("",!0)],40,cs))),128))]),i("form",{class:"comment-reply",onSubmit:q(_=>oe(d),["prevent"])},[i("div",fs,[i("span",vs,p(g(T)),1),$(i("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=_=>_e(E)?E.value=_:E=_),class:"reply-input",maxlength:"280",autocomplete:"off"},null,512),[[R,g(E)]])]),gs],40,ps)])):h("",!0)])])]))),128))])):h("",!0),U($t,{total:g(o),page:g(n)},null,8,["total","page"]),Vs])}}};var ks=D(ws,[["__scopeId","data-v-66a76186"]]);const Es=he({history:me("/"),routes:[{path:"/activities",name:"activities",component:ks}]});const bs={},Is={id:"app"};function ys(e,t){const s=H("router-view");return r(),a("div",Is,[U(s)])}var Ls=D(bs,[["render",ys]]);const C=pe(Ls);C.use(Es);C.use(Q);C.use(fe);C.use(ve,{plyr:{captions:{defaultActive:!1},controls:["play","progress","current-time","duration","mute","volume","fullscreen"]}});C.component("file-upload",ge);C.mount("#app");
