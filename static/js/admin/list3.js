import{_ as t,ab as a,ac as e,j as l,P as s,k as i,J as n,x as o,l as d,n as r,c as u,p as c,q as p,b as h}from"./index.js";import{p as w}from"./filter.js";const m={name:"SpecialTopics",data:()=>({list:null,total:0,listLoading:!0,parseTime:w}),created(){this.getList()},methods:{statusFilter:t=>({1:"online",0:"unpublished"}[t]),getList(){this.listLoading=!0,a().then((t=>{this.list=t.data.items,this.total=t.data.total,this.listLoading=!1}))},switchStatus(t){e(t.id,{1:"POST",0:"DELETE"}[t.status]).then((a=>{a.data.r||(t.status=!t.status,this.$message.error("切换状态失败!"))}))}}},g={class:"app-container"},f=h("Edit");var b=t(m,[["render",function(t,a,e,h,w,m){const b=l("el-table-column"),_=l("el-switch"),x=l("el-tooltip"),v=l("svg-icon"),L=l("el-button"),T=l("router-link"),y=l("el-table"),E=s("loading");return r(),i("div",g,[n((r(),o(y,{data:w.list,border:"",fit:"","highlight-current-row":"",style:{width:"100%"}},{default:d((()=>[u(b,{align:"center",label:"ID",width:"80"},{default:d((t=>[c("span",null,p(t.row.id),1)])),_:1}),u(b,{width:"140px",align:"center",label:"Date"},{default:d((t=>[c("span",null,p(w.parseTime(t.row.created_at,"{y}-{m}-{d} {h}:{i}")),1)])),_:1}),u(b,{width:"180px",align:"center",label:"Title"},{default:d((t=>[c("span",null,p(t.row.title),1)])),_:1}),u(b,{width:"280px",align:"center",label:"Intro"},{default:d((t=>[c("span",null,p(t.row.intro),1)])),_:1}),u(b,{width:"80px",align:"center",label:"N_Post"},{default:d((t=>[c("span",null,p(t.row.n_posts),1)])),_:1}),u(b,{"class-name":"status-col",label:"Published",width:"100"},{default:d((t=>[u(x,{content:m.statusFilter(parseInt(t.row.status)),placement:"top"},{default:d((()=>[u(_,{modelValue:t.row.status,"onUpdate:modelValue":a=>t.row.status=a,"active-value":1,"inactive-value":0,onChange:a=>m.switchStatus(t.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["content"])])),_:1}),u(b,{label:"Actions",align:"center",width:"230","class-name":"small-padding fixed-width"},{default:d((t=>[u(T,{to:"/topic/"+t.row.id+"/edit"},{default:d((()=>[u(L,{type:"primary",size:"small"},{default:d((()=>[u(v,{"icon-class":"edit"}),f])),_:1})])),_:2},1032,["to"])])),_:1})])),_:1},8,["data"])),[[E,w.listLoading]])])}]]);export{b as default};
